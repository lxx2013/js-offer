<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.bootcss.com/highlight.js/9.13.0/styles/atom-one-dark-reasonable.min.css" rel="stylesheet">
    <title>旋转数组的最小数字</title>
</head>

<body>
    <h2>旋转数组的最小数字</h2>
    <p>
        把一个数组最开始的若干个元素搬到数组的末尾，我们称之为数组的旋转。 输入一个非减排序的数组的一个旋转，输出旋转数组的最小元素。 例如数组{3,4,5,1,2}为{1,2,3,4,5}的一个旋转，该数组的最小值为1。
        NOTE：给出的所有元素都大于0，若数组大小为0，请返回0。</p>
    <p>时间复杂度: O(logn)</p>
    <p>思路:二分查找 </p>
    <pre>
        <code id="markdown" class="md">
## 首先,a[0] >= a[a.length-1]是绝对成立的,否则就是原数组,直接返回 a[0] 即可

#### 若 a[m] < a[m], 则选择后半部分, 即 slice(m+1)
                  ---------
            6   7 | o 4   |
                  ---------
#### 若 a[0] == a[m], 则选择后半部分, 因为会是一串相等的 6,6,6,6(错?!?!?!!!!)
                 ------- 
            6  6 | o 4 | 
                 -------
错!!! ,例如 [10,1,10,10,10] 则应选择前半部分
同理还有 [10,10,10,1,10]
解决办法 : `while(a[m] == a[r] && m < r) { r-- }`

#### 若 a[0] > a[m], 则选择前半部分
           --------- 
           | 6 o 3  | 4  
           ---------
        </code>
    </pre>
    <a href="https://www.nowcoder.com/questionTerminal/9f3231a991af4f55b95579b44b7a01ba">原题目链接</a>
    <pre><code id="code" class="js"></code></pre>
    <img src="https://i.loli.net/2018/12/19/5c1a4f82aaa81.png" alt="">
</body>
<script>
    //下面测试用例考虑有元素相等的情况
    console.log(findMin([1,3,1,1])) //a[0] == a[a.length-1]
    console.log(findMin([6, 6, 6, 6, 4]))     //a[0] == a[m]
    console.log(findMin([10, 10, 10, 1, 10]))
    console.log(findMin([10, 1 , 10, 10, 10]))

    function findMin(a) {
        //二分查找
        if (a.length == 0) {
            return 0;
        }
        
        var l = 0, r = a.length - 1;
        while (l < r) {
            console.log(a.slice(l,r+1).join(' '))
            if (a[l] < a[r]) return a[l]
            if (l+1 == r) {
                return a[l] <= a[r] ? a[l] : a[r]
            }
            var m = (l + r) >> 1;
            if (a[l] > a[m]) {
                r = m
            } else if (a[l] < a[m]) {
                l = m + 1
            } else if (a[l] == a[m] && a[m] > a[r]) {
                l = m + 1
            } else if (a[l] == a[m] && a[m] == a[r]) {
                while(a[m] == a[r] && m<r){
                    r--
                }
            }
        }
        return a[l];
    }
</script>
<script src="https://cdn.bootcss.com/highlight.js/9.13.1/highlight.min.js"></script>
<script>
    document.querySelector("#code").innerText = document.querySelector("script").innerText
    hljs.initHighlightingOnLoad();
</script>

</html>